# User Administration

This section documents administrator-only user management features in FinLedger.

## Access and Scope

User administration is available from `Dashboard` for users with the `administrator` role.

Manager and accountant users do not see the admin user-management cards and cannot call admin user-management APIs.

## Admin Workspace (Dashboard)

On the dashboard, the `User Management` area includes:

- `User Approvals`
- `Users with Expired Passwords`
- `Suspended Users`
- `Currently Logged-in Users`
- `All Users` table
- `Create User`
- `Delete User`
- `Reset User Password`
- `Suspend User Account`
- `Email User`

## Registration Request Workflow

New users can request access from the login page using `New User`.

Registration behavior:

1. The requester submits profile details, role, password, and security questions.
2. FinLedger creates the account with `pending` status.
3. The requester receives a registration confirmation email.
4. An administrator reviews the request in `User Approvals`.
5. The admin selects `Approve` or `Reject`.

Approval behavior:

- Status is updated to `active`.
- An approval email is sent to the user.

Rejection behavior:

- Status is updated to `rejected`.

## Create User (Administrator)

Use the `Create User` form to create accounts directly.

Fields in the form:

- First Name
- Last Name
- Address
- Date of Birth
- Email
- Role (`administrator`, `manager`, `accountant`)
- Profile Image

Implementation notes:

- Username is generated automatically from first initial + last name + month/year stamp.
- If no password is provided by the flow, a temporary password is generated by the system.
- New accounts are created in `pending` status and then approved in `User Approvals`.
- Profile images are limited to common image file types and size limits enforced by upload middleware.

## View and Edit Users

The `All Users` table provides a report of users and supports inline editing.

Table capabilities:

- Pagination (`5`, `10`, `25`, `50`, `100` per page)
- Editable fields from the table cells
- Updates to fields such as name, role, status, dates, email, and address

Use this table to maintain role changes and status changes as part of user lifecycle operations.

## Suspend and Reinstate Users

Manual suspension:

1. Open `Suspend User Account`.
2. Select an eligible active user.
3. Enter suspension start and end date/time.
4. Submit the form.

Reinstatement:

- In `Suspended Users`, select `Reinstate`.

Additional behavior:

- Expired suspension windows are automatically unsuspended by background jobs.
- Suspensions can also occur from security policy events (for example failed login limits or expired passwords).

## Delete User

Use `Delete User` to permanently remove an account.

Behavior:

- Admin selects a username.
- Confirmation prompt appears before deletion.
- The UI prevents an admin from deleting their own account.

## Reset User Password

Use `Reset User Password` when a user cannot access their account.

Behavior:

1. Select the username.
2. Submit reset.
3. System generates a temporary password.
4. Temporary password is emailed to the user.

Security behavior after reset:

- Account is marked as temporary-password mode.
- Temporary passwords use a short expiry window.
- User must complete forced password change and security-question setup at next login.

## Email User

Use `Email User` to send direct messages from inside the system.

Required fields:

- Recipient username
- Subject
- Message

This is useful for approval follow-ups, suspension notices, and operational communication.

## Logged-In Users and Expired Password Reporting

`Currently Logged-in Users` card:

- Shows active sessions visible to administrators.

`Users with Expired Passwords` card:

- Highlights users with expired passwords.
- Works with password-expiration automation that sends warnings and can suspend expired accounts.

## Operational Notes

- Most user-administration actions are API-enforced as admin-only, even if a user attempts direct calls.
- For password policy details and self-service recovery, see `docs/User Manual/02_Login_and_Security/README.md`.
